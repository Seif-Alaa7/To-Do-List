<!DOCTYPE html>
<html>
<head>
    <title>To-Do Items</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.min.js"></script>
</head>
<body>
    <h1>Welcome, <span>@ViewData["Name"]</span></h1>
    <p>Here is your To-Do list:</p>

    <a href="/ToDoItems/CreateNew"> Create New</a>

    <table class="table table-hover">
        <thead>
            <tr>
                <th scope="col">Title</th>
                <th scope="col">Description</th>
                <th scope="col">Deadline</th>
                <th scope="col">Action</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.Title</td>
                    <td>@item.Description</td>
                    <td>@item.Deadline</td>
                    <td>
                        <a href="/ToDoItems/Edit/@item.Id">Edit</a> |
                        <a href="javascript:void(0);" onclick="confirmDelete(@item.Id)">Delete</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>

    <script type="text/javascript">
        function confirmDelete(id) {
            Swal.fire({
                title: 'Are you sure?',
                text: "You won't be able to revert this!",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Yes, delete it!'
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = '/ToDoItems/Delete/' + id;
                }
            })
        }
    </script>
</body>
</html>
